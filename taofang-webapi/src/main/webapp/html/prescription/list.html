<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>九九淘方网</title>
    <link rel="stylesheet" href="http://apps.bdimg.com/libs/jquerymobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" href="../../css/prescription.css">
    <script src="http://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://apps.bdimg.com/libs/jquerymobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="../../js/jquery.cookie.js"></script>
    <script src="../../js/common.js"></script>
    <script src="../../js/prescription.js"></script>
    <script>
        $(document).ready(function () {
            (function ($) {
                $.getUrlParam = function (name) {
                    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                    var r = window.location.search.substr(1).match(reg);
                    if (r != null){
                        return decodeURI(r[2]);
                    }
                    return null;
                }
            })(jQuery);
            // 查询列表
            var prescription = $.getUrlParam('prescription');
            $('#prescriptionname').val(prescription);
            getPrescriptionPagination(prescription, 0, 1, 5);
            getPrescriptionRelation(prescription);
        });
    </script>
</head>
<body>
    <div id="prescriptionpage" data-role="page">
        <div id="header" data-role="header">
            <div class="blackheader" >
                <div class="backdiv" onclick="backhomepage()"><img class="back" src="../../image/common/back.png"></div>
                <div id="prescriptionnamediv">
                    <input id="prescriptionname" data-role="none" class="prescriptionname" type="text" name="prescriptionName" placeholder="输入关键字寻找相关偏方">
                </div>
                <div class="prescriptionbutton" onclick="prescriptionSearch()">搜索</div>
            </div>
        </div>
        <div id="content" class="content">
            <div id="result" class="resultdiv">
                <div class="searchselectdiv">
                    <div id="searchselecttext" class="searchselecttext">默认排序</div>
                    <div class="searchselectimg" onclick="showSelectDiv()"><img src="../../image/common/select.png" /></div>
                </div>
                <div id="searchresult" class="searchresultdiv"></div>
            </div>
            <div id="pagecontentlist" class="pagecontentlistdiv">
                <table>
                    <tbody>
                    <tr>
                        <td><div class="contentpointdiv"></div></td>
                        <td><div class="contentlistdiv" onclick="showPrescriptionDetail(1)"></div></td>
                        <td><div class="contentscoretitlediv"></div></td>
                        <td><div class="contentscorediv"></div></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div id="page" class="page">
                <div class="previouspagediv">
                    <div id="previouspage" class="previouspage_opacity" onclick="doPreviousPage()">上一页</div>
                </div>
                <div class="currentpagediv">
                    <div class="currentpage">0/0</div>
                </div>
                <div class="nextpagediv">
                    <div id="nextpage" class="nextpage" onclick="doNextPage()">下一页</div>
                </div>
            </div>
            <div id="prescriptionrelationdiv">
                <div class="prescriptionrelationtitlediv">相关疾病</div>
                <div id="prescriptionrelationlist1" class="prescriptionrelationlistdiv"></div>
                <div class="prescriptionrelationtitlediv">相关症状</div>
                <div id="prescriptionrelationlist2" class="prescriptionrelationlistdiv"></div>
                <div class="prescriptionrelationtitlediv">自然疗法</div>
                <div id="prescriptionrelationlist3" class="prescriptionrelationlistdiv"></div>
            </div>
        </div>
        <div id="footer" data-role="footer">
            <div id="addiv" class="addiv">
                <div class="slide" id="slide">
                    <div class="img-div">
                        <img src="/image/guanggao.png" title="广告1"/>
                        <img src="/image/guanggao.png" title="广告2"/>
                        <img src="/image/guanggao.png" title="广告3"/>
                    </div>
                    <div class="slide-btn">
                        <a data-role="none" href="#" class="hover">●</a>
                        <a data-role="none" href="#">●</a>
                        <a data-role="none" href="#">●</a>
                    </div>
                </div>
            </div>
            <div class="switchdiv">
                <div class="phonediv">
                    <div class="phone" onclick="goToHomePage('phone')">
                        <div class="phoneimg"><img src="../../image/common/iphone.png"></div>
                        <div class="phonetext">触屏版</div>
                    </div>
                </div>
                <div class="phonepcdiv"></div>
                <div class="pcdiv">
                    <div class="pc" onclick="goToHomePage('pc')">
                        <div class="pcimg"><img src="../../image/common/pc.png"></div>
                        <div class="pctext">电脑版</div>
                    </div>
                </div>
            </div>
            <div class="declarediv">
                <div class="aboutustitle">关于我们 | 法律声明</div>
                <div class="aboutuscontent">Copyright  ©  2015  WWW.99TAOFANG.COM  版权所有</div>
                <div class="aboutuscontent">本站信息仅供参考_不能作为诊断及医疗的依据</div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var sWidth = $(document).width();
        var sHeight = sWidth * 0.4;
        $(".slide").attr("style", "height:" + (sHeight + 40) + "px");
        $(".slide .img-div").attr("style","width:"+ 3*sWidth + "px;height:" + sHeight + "px;");
        $(".slide .img-div img").attr("style","width:"+ sWidth + "px;height:" + sHeight + "px;");
        var zBase = {
            config:{
                index:0,
                auto:true,
                direct:'left'
            },
            init:function(){
                this.slide = this.$id('slide');
                this.img_div = this.$c('img-div')[0],
                        this.slide_btn = this.$tag('a',this.$c('slide-btn')[0]);
                this.img_arr = this.$tag('img',this.img_div);
                if(this.config.auto) this.play();
                this.hover();
            },
            $id:function(id){return document.getElementById(id);},
            $tag:function(tagName,obj){return (obj ?obj : document).getElementsByTagName(tagName);	},
            $c: function (claN,obj){
                var tag = this.$tag('*'),reg = new RegExp('(^|\\s)'+claN+'(\\s|$)'),arr=[];
                for(var i=0;i<tag.length;i++){
                    if (reg.test(tag[i].className)){
                        arr.push(tag[i]);
                    }
                }
                return arr;
            },
            $add:function(obj,claN){
                reg = new RegExp('(^|\\s)'+claN+'(\\s|$)');
                if (!reg.test(obj.className)){

                    obj.className += ' '+claN;
                }
            },
            $remve:function(obj,claN){var cla=obj.className,reg="/\\s*"+claN+"\\b/g";obj.className=cla?cla.replace(eval(reg),''):''},
            css:function(obj,attr,value){
                if(value){
                    obj.style[attr] = value;
                }else{
                    return  typeof window.getComputedStyle != 'undefined' ? window.getComputedStyle(obj,null)[attr] : obj.currentStyle[attr];
                }
            },
            animate:function(obj,attr,val){
                var d = 1000;//动画时间一秒完成。
                if(obj[attr+'timer']) clearInterval(obj[attr+'timer']);
                var start = parseInt(zBase.css(obj,attr));//动画开始位置
                //space = 动画结束位置-动画开始位置，即动画要运动的距离。
                var space =  val- start,st=(new Date).getTime(),m=space>0? 'ceil':'floor';
                obj[attr+'timer'] = setInterval(function(){
                    var t=(new Date).getTime()-st;//表示运行了多少时间，
                    if (t < d){//如果运行时间小于动画时间
                        zBase.css(obj,attr,Math[m](zBase.easing['easeOut'](t,start,space,d)) +'px');
                    }else{
                        clearInterval(obj[attr+'timer']);
                        zBase.css(obj,attr,top+space+'px');
                    }
                },20);
            },
            play:function(){
                this.slide.timer = setInterval(function(){
                    zBase.config.index++;
                    if(zBase.config.index>=zBase.img_arr.length) zBase.config.index=0;//如果当前索引大于图片总数，把索引设置0

                    zBase.animate(zBase.img_div,zBase.config.direct,-zBase.config.index*sWidth);
                    for(var j=0;j<zBase.slide_btn.length;j++){
                        zBase.$remve(zBase.slide_btn[j],'hover');
                    }
                    zBase.$add(zBase.slide_btn[zBase.config.index],'hover');

                },5000)


            },
            hover:function(){
                for(var i=0;i<this.slide_btn.length;i++){
                    this.slide_btn[i].index = i;//储存每个导航的索引值
                    this.slide_btn[i].onmouseover = function(){
                        if(zBase.slide.timer) clearInterval(zBase.slide.timer);
                        zBase.config.index =this.index;

                        for(var j=0;j<zBase.slide_btn.length;j++){
                            zBase.$remve(zBase.slide_btn[j],'hover') ;
                        }
                        zBase.$add(zBase.slide_btn[zBase.config.index],'hover');
                        zBase.animate(zBase.img_div,zBase.config.direct,-zBase.config.index*sWidth);
                    }
                    this.slide_btn[i].onmouseout = function(){
                        zBase.play();
                    }
                }
            },
            easing :{
                linear:function(t,b,c,d){return c*t/d + b;},
                swing:function(t,b,c,d) {return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;},
                easeIn:function(t,b,c,d){return c*(t/=d)*t*t*t + b;},
                easeOut:function(t,b,c,d){return -c*((t=t/d-1)*t*t*t - 1) + b;},
                easeInOut:function(t,b,c,d){return ((t/=d/2) < 1)?(c/2*t*t*t*t + b):(-c/2*((t-=2)*t*t*t - 2) + b);}
            }
        };
        zBase.init();
    </script>
</body>
</html>